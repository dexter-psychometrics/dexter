<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Equating a Pass-Fail Score • dexter</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Equating a Pass-Fail Score">
<meta property="og:description" content="dexter">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dexter</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/dexter.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/DIF_vignette.html">Exploring Differential Items Functioning with Dexter</a>
    </li>
    <li>
      <a href="../articles/Equating.html">Equating a Pass-Fail Score</a>
    </li>
    <li>
      <a href="../articles/Plausible_Values.html">Plausible Values in Dexter</a>
    </li>
    <li>
      <a href="../articles/profile-plots.html">How Members of Different Groups Obtain the Same Test Score: Profile Plots in Dexter</a>
    </li>
    <li>
      <a href="../articles/Test_Individual_differences.html">One theta to rule them all: Test Individual Differences</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Blog
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/blog/2021-02-15-140">140</a>
    </li>
    <li>
      <a href="../articles/blog/2021-01-14-and-have-you-seen-the-rasch-sampler">and have you seen the rasch sampler</a>
    </li>
    <li>
      <a href="../articles/blog/2020-12-22-happy-new-year">happy new year</a>
    </li>
    <li>
      <a href="../articles/blog/2020-12-22-analysing-continuous-responses-with-dexter">analysing continuous responses with dexter</a>
    </li>
    <li>
      <a href="../articles/blog/2020-11-23-hot-on-the-trail-of-warm">hot on the trail of warm</a>
    </li>
    <li>
      <a href="../articles/blog/2020-05-27-the-information-game">the information game</a>
    </li>
    <li>
      <a href="../articles/blog/2020-05-15-calculating-the-score-distribution-giving-ability">calculating the score distribution giving ability</a>
    </li>
    <li>
      <a href="../articles/blog/2020-03-06-local-in-dependence-and-polytomization">local in dependence and polytomization</a>
    </li>
    <li>
      <a href="../articles/blog/2020-01-15-my-more-or-less-coherent-views-on-model-fit">my more or less coherent views on model fit</a>
    </li>
    <li>
      <a href="../articles/blog/2020-01-01-happy-new-year">happy new year</a>
    </li>
    <li>
      <a href="../articles/blog/2019-11-23-fyi">fyi</a>
    </li>
    <li>
      <a href="../articles/blog/2019-08-26-dexter-is-1-again">dexter is 1 again</a>
    </li>
    <li>
      <a href="../articles/blog/2019-06-27-120-100-100">120.100.100</a>
    </li>
    <li>
      <a href="../articles/blog/2019-05-15-my-perennial-slide-1">my perennial slide 1</a>
    </li>
    <li>
      <a href="../articles/blog/2019-05-14-issues-with-dbplyr-and-how-to-resolve">issues with dbplyr and how to resolve</a>
    </li>
    <li>
      <a href="../articles/blog/2019-05-12-aspects-of-the-aspects-ratio">aspects of the aspects ratio</a>
    </li>
    <li>
      <a href="../articles/blog/2019-05-11-visualising-differential-item-pair-functioning-the-lazy-cook-way">visualising differential item pair functioning the lazy cook way</a>
    </li>
    <li>
      <a href="../articles/blog/2019-04-26-dexter-0-8-5-on-cran">dexter 0.8.5 on cran</a>
    </li>
    <li>
      <a href="../articles/blog/2019-01-03-dexter-0-8-4-is-out">dexter 0.8.4 is out</a>
    </li>
    <li>
      <a href="../articles/blog/2019-01-01-happy-2019">happy 2019</a>
    </li>
    <li>
      <a href="../articles/blog/2018-11-05-test-and-item-information-functions-in-dexter">test and item information functions in dexter</a>
    </li>
    <li>
      <a href="../articles/blog/2018-11-03-dexter-0-8-3-on-cran">dexter 0.8.3 on cran</a>
    </li>
    <li>
      <a href="../articles/blog/2018-10-15-random-variation-and-power-in-profile-plots">random variation and power in profile plots</a>
    </li>
    <li>
      <a href="../articles/blog/2018-09-24-the-scoring-game">the scoring game</a>
    </li>
    <li>
      <a href="../articles/blog/2018-09-22-100">100</a>
    </li>
    <li>
      <a href="../articles/blog/2018-08-31-dexter-meets-pisa-the-market-basket-approach">dexter meets pisa the market basket approach</a>
    </li>
    <li>
      <a href="../articles/blog/2018-08-21-dexter-0-8-1-submitted">dexter 0.8.1 submitted</a>
    </li>
    <li>
      <a href="../articles/blog/2018-08-07-distractor-plots-in-dexter">distractor plots in dexter</a>
    </li>
    <li>
      <a href="../articles/blog/2018-07-13-dextermst">dextermst</a>
    </li>
    <li>
      <a href="../articles/blog/2018-06-11-comparing-parameter-estimates-from-dexter">comparing parameter estimates from dexter</a>
    </li>
    <li>
      <a href="../articles/blog/2018-05-25-equating-a-pass-fail-score-with-dexter">equating a pass fail score with dexter</a>
    </li>
    <li>
      <a href="../articles/blog/2018-02-25-item-total-regressions-in-dexter">item total regressions in dexter</a>
    </li>
    <li>
      <a href="../articles/blog/2018-02-09-dexter-is-1">dexter is 1</a>
    </li>
    <li>
      <a href="../articles/blog/2017-12-13-hello">hello</a>
    </li>
  </ul>
</li>
<li>
  <a href="../articles/blog/about.html">About</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dexter-psychometrics/dexter">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Equating_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Equating a Pass-Fail Score</h1>
                        <h4 class="author">Timo Bechger, Jesse Koops and Ivailo Partchev</h4>
            
            <h4 class="date">2021-09-16</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/dexter-psychometrics/dexter/blob/master/vignettes/Equating.Rmd"><code>vignettes/Equating.Rmd</code></a></small>
      <div class="hidden name"><code>Equating.Rmd</code></div>

    </div>

    
    
<style>
img{ border:none;}
</style>
<p>Educational tests are often equipped with a threshold to turn the test score into a pass-fail decision. When a new test of the same kind is developed, we need a threshold for it that will be, in some sense, equivalent to the threshold for the old — let us call it <em>reference</em> — test. This is a special case of <em>test equating</em>, and it is similar to some well-studied problems in epidemiology; for the comfort of our predominantly psychometric audience, we start with an outline of those.</p>
<p>Consider a test for pregnancy. The state of nature is a binary variable (positive / negative). So is the outcome of the test, although the decision is possibly produced by dichotomizing the quantitative measurement of some hormone or other substance, just like we want to do with our educational test scores. There are four possible outcomes in all, which can be represented in a two-by-two table</p>
<table class="table"><tbody>
<tr>
<td rowspan="2" colspan="2">
</td>
<td colspan="2">
State of nature
</td>
</tr>
<tr>
<td>
Positive
</td>
<td>
Negative
</td>
</tr>
<tr>
<td rowspan="2">
Prediction
</td>
<td>
Positive
</td>
<td>
True positive (TP)
</td>
<td>
False positive (FP)
</td>
</tr>
<tr>
<td>
Negative
</td>
<td>
False negative (FN)
</td>
<td>
True negative (TN)
</td>
</tr>
</tbody></table>
<p>where TP, FP, FN, and TN are all counts. There is one ideal situation in which FP=FN=0 and all predictions are correct, and very many situations where this is not the case. Many statistics have been developed to measure the various ways in which actual data can depart from the ideal situation — this <a href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic">Wikipedia page</a> lists at least 13 of them. We will mention only three:</p>
<ul>
<li>True positive rate (TPR, sensitivity): The proportion of positives that are correctly identified as such, or TP/(TP+FN)</li>
<li>True negative rate (TNR, specificity): The proportion of negatives that are correctly identified as such, or TN/(TN+FP)</li>
<li>False positive rate (FNR) = 1 - specificity = FP/(TN+FP)</li>
</ul>
<p>What we can try to do is select the threshold for the test in such a way that the resulting table gets as close to the optimum as possible (not forgetting that the subjective cost of the two kinds of erroneous predictions may differ). The <em>receiver operating characteristic curve (ROC curve)</em> (<span class="citation">Swets (1996)</span>) is a graphical representations of the trade-offs between the TPR (one possible measure of benefit) and FPR (one possible measure of costs) resulting from all possible choices of such a threshold. The optimal choice would then be the one corresponding to the point on the curve that comes closest to the upper left corner (perfect prediction). An example ROC curve is shown on the left hand plot below.</p>
<p><img src="Equating_files/figure-html/unnamed-chunk-1-1.png" width="700"><img src="Equating_files/figure-html/unnamed-chunk-1-2.png" width="700"></p>
<p>Before we explain in more detail, let us go back to our educational example. Let us assume for a moment that all students have taken both the old (reference) test and the new (target) test, and that the decision on the reference test represents the ‘state of nature’. The task is then to select a threshold on the target test such that the decision on the reference is reproduced as closely as possible by the decision on the new test. On the right hand plot, the (fictional) distribution function of the scores on the target test is represented in blue for the students who passed the reference test, and in red for those who failed. We show two of the infinitely many thresholds that can be chosen, and it is clear that the one shown in black is much preferable to the one shown in gray (compare with the two dots on the ROC curve).</p>
<div id="an-illustration-with-complete-psychometric-data" class="section level2">
<h2 class="hasAnchor">
<a href="#an-illustration-with-complete-psychometric-data" class="anchor"></a>An illustration with complete psychometric data</h2>
<p>It is time to try out these ideas with (simulated) psychometric data. First, we examine the situation where both tests, the reference test and the new one, have been administered to the same respondents. This is not a typical situation because, in practice, we usually deal with data collected in an <em>incomplete design</em> where no candidates take both tests. In this situation, if we can estimate the parameters of the items, we can use the IRT model to <em>fill in the missing data</em>. Obviously, without observations we no longer know whether an individual has actually passed the reference test or not (see <span class="citation">Bolsinova and Maris (2016)</span>). We can, however, calculate sensitivity and specificity even in that situation.</p>
<p>We use the verbal aggression data with the first 14 items assumed to be the reference test, and the remaining 10 items to be the target test. The pass-fail score on the reference test is set to 10. All this is quite arbitrary, of course – the test is not intended to measure educational achievement, and we are certainly not handing out diplomas for verbal aggressiveness.</p>
<p>As a start, we produce a scatter plot of the scores:</p>
<p><img src="Equating_files/figure-html/unnamed-chunk-2-1.png" width="384" style="display: block; margin: auto;"></p>
<p>The proportion of respondents who pass the reference test gradually increases with the score on the new test; below, it is plotted in red:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">prob_pass</span> <span class="op">=</span> <span class="va">tp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">29</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">28</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">prob_pass</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">ref_test</span><span class="op">[</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">==</span><span class="va">i</span><span class="op">]</span><span class="op">&gt;=</span><span class="fl">10</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">==</span><span class="va">i</span><span class="op">)</span>
  <span class="va">tp</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">ref_test</span><span class="op">[</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">&gt;=</span><span class="va">i</span><span class="op">]</span><span class="op">&gt;=</span><span class="fl">10</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">&gt;=</span><span class="va">i</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">28</span>, <span class="va">prob_pass</span>, ylab<span class="op">=</span><span class="st">"Proportion passing the reference test"</span>, xlab<span class="op">=</span><span class="st">"New test score"</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"o"</span>, col<span class="op">=</span><span class="st">"red"</span>,bty<span class="op">=</span><span class="st">'l'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">28</span>, <span class="va">tp</span>, type<span class="op">=</span><span class="st">"o"</span>, lty<span class="op">=</span><span class="fl">2</span>, col<span class="op">=</span><span class="st">"blue"</span><span class="op">)</span></code></pre></div>
<p><img src="Equating_files/figure-html/unnamed-chunk-3-1.png" width="480" style="display: block; margin: auto;"></p>
<p>The blue dashed line is the percentage of true positives. Among other things, it shows that if the new pass-fail score is zero and everybody passes, about 15 percent will be qualified. If this is high enough we can save ourselves the trouble of administering a new test.</p>
<p>Since the same respondents have taken both tests, it is straightforward to determine the sensitivity and specificity of the new test for each pass-fail score:</p>
<!-- to do: might decide against showing some of this code, pictures themselves are important for the story, not the code-->
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">specificity</span> <span class="op">=</span> <span class="va">sensitivity</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">29</span><span class="op">)</span>
<span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq_along</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">28</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="va">sensitivity</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">ref_test</span><span class="op">[</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">&gt;=</span><span class="va">i</span><span class="op">]</span><span class="op">&gt;=</span><span class="fl">10</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">ref_test</span><span class="op">&gt;=</span><span class="fl">10</span><span class="op">)</span>
  <span class="va">specificity</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">ref_test</span><span class="op">[</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">&lt;</span><span class="va">i</span><span class="op">]</span><span class="op">&lt;</span><span class="fl">10</span><span class="op">)</span><span class="op">/</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">ref_test</span><span class="op">[</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">&lt;</span><span class="va">i</span><span class="op">]</span><span class="op">&lt;</span><span class="fl">10</span><span class="op">)</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">ts</span><span class="op">$</span><span class="va">ref_test</span><span class="op">[</span><span class="va">ts</span><span class="op">$</span><span class="va">new_test</span><span class="op">&gt;=</span><span class="va">i</span><span class="op">]</span><span class="op">&lt;</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span> 
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">28</span>, <span class="va">sensitivity</span>, ylab<span class="op">=</span><span class="st">"sensitivity/specificity"</span>, xlab<span class="op">=</span><span class="st">"new test score"</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"o"</span>, col<span class="op">=</span><span class="st">"red"</span>,bty<span class="op">=</span><span class="st">'l'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/lines.html">lines</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">28</span>, <span class="va">specificity</span>, col<span class="op">=</span><span class="st">"green"</span>, type<span class="op">=</span><span class="st">"o"</span><span class="op">)</span></code></pre></div>
<p><img src="Equating_files/figure-html/unnamed-chunk-4-1.png" width="480" style="display: block; margin: auto;"></p>
<p>If sensitivity and specificity are deemed equally important, the plot suggests 14 or 15 as appropriate pass-fail scores. Higher values would make the specificity go up (i.e., less false positives) at the expense of sensitivity; lower values would do the reverse. From the plots made earlier, we see that about half of the persons with a score equal to the passing score would actually pass the reference test.</p>
<p>As candidates are classified into two classes, we can readily show the trade-off between sensitivity and specificity with the ROC curve:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">specificity</span>, <span class="va">sensitivity</span>, col<span class="op">=</span><span class="st">"green"</span>, xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>, type<span class="op">=</span><span class="st">"l"</span>,bty<span class="op">=</span><span class="st">'l'</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/text.html">text</a></span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">specificity</span>, <span class="va">sensitivity</span>, <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">28</span><span class="op">)</span>, cex<span class="op">=</span><span class="fl">0.7</span>, offset <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/abline.html">abline</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,lty<span class="op">=</span><span class="fl">2</span>, col<span class="op">=</span><span class="st">"grey"</span><span class="op">)</span></code></pre></div>
<p><img src="Equating_files/figure-html/unnamed-chunk-5-1.png" width="480" style="display: block; margin: auto;"></p>
<p>Other packages and functions may produce prettier plots — but can they do it without complete data?</p>
</div>
<div id="incomplete-data" class="section level2">
<h2 class="hasAnchor">
<a href="#incomplete-data" class="anchor"></a>Incomplete Data</h2>
<p>It is more involved, but practically more useful, to calculate sensitivity and specificity even though the two tests have not been both administered to the same persons. We first simulate a complete data set with responses to 60 items. Then, we select the first 500 persons and 40 items to represent the reference test, and the remaining 200 persons and items 21 through 60 to represent the target test. Note that the two respondent groups are sampled from two different ability populations and cannot be considered as equivalent.</p>
<p>We create a new <code>dexter</code> project, and we add the two booklets. We assume that the pass-fail limit for the reference test is 23 points.</p>
</div>
<div id="the-probability-to-pass" class="section level2">
<h2 class="hasAnchor">
<a href="#the-probability-to-pass" class="anchor"></a>The probability to pass</h2>
<p>As a start, we use the function <code>probability_to_pass</code> to estimate, for each score on the target test, the proportion of persons who pass the reference test. We show this as a plot.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p_sm</span> <span class="op">=</span> <span class="fu"><a href="../reference/fit_enorm.html">fit_enorm</a></span><span class="op">(</span><span class="va">db_sm</span>, method<span class="op">=</span><span class="st">'Bayes'</span>, nDraws <span class="op">=</span> <span class="fl">5000</span><span class="op">)</span>

<span class="va">ou_e</span> <span class="op">=</span> <span class="fu"><a href="../reference/probability_to_pass.html">probability_to_pass</a></span><span class="op">(</span><span class="va">db_sm</span>, <span class="va">p_sm</span>,
                           ref_items <span class="op">=</span> <span class="va">ref_items</span>, 
                           target_booklets <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>booklet_id<span class="op">=</span><span class="st">"bk2"</span>, item_id<span class="op">=</span><span class="va">target_items</span><span class="op">)</span>, 
                           pass_fail <span class="op">=</span> <span class="va">pass_fail</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ou_e</span>, what<span class="op">=</span><span class="st">"equating"</span><span class="op">)</span></code></pre></div>
<p><img src="Equating_files/figure-html/unnamed-chunk-10-1.png" width="384" style="display: block; margin: auto;"></p>
<p>Let the scores on the reference and new test be written, respectively, as <span class="math inline">\(R_+\)</span> and <span class="math inline">\(N_+\)</span>, and let <span class="math inline">\(\mathbf{x}\)</span> denote the available data. We calculate <span class="math inline">\(P(R_+ \geq c|N_+ = s, \mathbf{x})\)</span>, the probability that a person with a score of <span class="math inline">\(s\)</span> on the target test will pass. Simply stated, we calculate this probability by averaging over what could have happened on the basis of all available data. A technical appendix explains a bit more.</p>
<p>A little extra in the plot are the bars. These refer to the traditional ability-based pass-fail score obtained as follows: First, estimate an ability for each score on the reference and the new test. Then, determine the score on the new test corresponding to the smallest ability equal to or larger than the ability corresponding to the pass-fail score on the reference test. This will then be the pass-fail score in the new test. The bars actually denote the probabilities of pass-fail scores thus obtained. By construction, such pass-fail scores correspond to the lowest scores giving a probability to pass equal or higher than 0.5. While this is the usual procedure to equate a pass-fail score, we believe the procedure that we propose here is more informative.</p>
</div>
<div id="sensitivity-and-specificity" class="section level2">
<h2 class="hasAnchor">
<a href="#sensitivity-and-specificity" class="anchor"></a>Sensitivity and specificity</h2>
<p>Having the probability to pass and the proportion of respondents, <span class="math inline">\(P(N_+ = s)\)</span>, for all possible scores <span class="math inline">\(s\)</span>, we can calculate sensitivity and specificity and plot them for each possible pass-fail score on the target test:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">ou_e</span>, what<span class="op">=</span><span class="st">'sens/spec'</span><span class="op">)</span></code></pre></div>
<p><img src="Equating_files/figure-html/unnamed-chunk-11-1.png" width="384" style="display: block; margin: auto;"></p>
<p>If sensitivity and specificity are equally important, the plot suggests 24 as a pass-fail score on the new test.</p>
</div>
<div id="conclusion" class="section level2">
<h2 class="hasAnchor">
<a href="#conclusion" class="anchor"></a>Conclusion</h2>
<p>An educational test equipped with a single pass-fail score is a binary test aimed at classifying candidates into those who pass, and those who fail. In fields like medical testing or machine learning, sensitivity and specificity are typically considered to evaluate the performance of such a test. Essentially, what we have tried to do is apply this logic to educational tests. Item response theory was used to deal with incomplete data as we typically see in educational measurement. Presumably, medical testing faces similar complications, but this is beyond our immediate scope.</p>
<p>In closing, we should mention that this is a first attempt to equate tests in a way that does not involve unobservable quantities; it uses item response theory to fill in missing data, no more. We would like to test the functions more thoroughly before attempting an extension to classification into more than two classes. Feedback from users is very welcome.</p>
</div>
<div id="technical-appendix" class="section level2">
<h2 class="hasAnchor">
<a href="#technical-appendix" class="anchor"></a>Technical Appendix</h2>
<p>Let us consider how we determine the probability to pass the reference test given a score <span class="math inline">\(N_+=s\)</span> on the target test. This probability can be defined as:<br><span class="math display">\[
P(R_+ \geq c|N_+ = s, \mathbf{x})
      = \int_{\mathbf{b},\theta} 
             P(R_+ \geq c|\theta,\mathbf{b}) 
             f(\theta|N_+ = s, \mathbf{b}) f(\mathbf{b}|\mathbf{x})
      d\mathbf{b} d\theta,
\]</span></p>
<p>where <span class="math inline">\(Y_+\)</span> denotes the score on the reference test, with pass-fail score <span class="math inline">\(c\)</span>, <span class="math inline">\(\theta\)</span> denotes ability and <span class="math inline">\(\mathbf{b}\)</span> is the vector of item parameters. The integrand has three parts:</p>
<ul>
<li>
<span class="math inline">\(f(\mathbf{b}|\mathbf{x})\)</span>: The posterior of the item parameters, given all data <span class="math inline">\(\mathbf{x}\)</span>.</li>
<li>
<span class="math inline">\(f(\theta|N_+ = s, \mathbf{b})\)</span>: The posterior of ability given the score on the new test.</li>
<li>
<span class="math inline">\(P(R_+ \geq c|\theta,\mathbf{b})\)</span>: The probability to pass given ability equal to <span class="math display">\[
P(R_+ \geq c|\theta,\mathbf{b}) 
= \sum_{s \geq c} P(R_+ = s |\theta, \mathbf{b}) 
= \sum_{s \geq c} \frac{\gamma_s(\mathbf{b}) e^{s \theta}}
                     {\sum_h \gamma_h(\mathbf{b}) e^{h \theta}},
\]</span> with <span class="math inline">\(\gamma_s(\mathbf{b})\)</span> the elementary symmetric function of order s.</li>
</ul>
<p>To calculate a Monte-Carlo estimate, repeat:</p>
<ul>
<li>sample item parameters <span class="math inline">\(\mathbf{b}^* \sim f(\mathbf{b}|\mathbf{x})\)</span>
</li>
<li>sample a plausible value <span class="math inline">\(\theta^* \sim f(\theta|N_+ = s, \mathbf{b}^*)\)</span>
</li>
<li>calculate <span class="math inline">\(P(R_+ \geq c|\theta^*,\mathbf{b}^*)\)</span>
</li>
</ul>
<p>We do this as often as we can afford (currently, a thousand times), and we take the average as an estimate of <span class="math inline">\(P(R_+ \geq c|\theta^*,\mathbf{b}^*)\)</span>.</p>
<p>Sensitivity and specificity are calculated from the score distribution on the new-test and the probability to pass. The following code shows how:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">p_pass_given_s</span> <span class="op">=</span> <span class="va">out</span><span class="op">$</span><span class="va">probability_to_pass</span>
  <span class="va">ps</span> <span class="op">=</span> <span class="va">ou_e</span><span class="op">$</span><span class="va">pnew</span>
  <span class="va">tp</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="va">p_pass_given_s</span><span class="op">*</span><span class="va">ps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="va">ps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="va">sensitivity</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="va">p_pass_given_s</span><span class="op">*</span><span class="va">ps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="va">tp</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>
  
  <span class="va">tn</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">p_pass_given_s</span><span class="op">)</span><span class="op">*</span><span class="va">ps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="va">ps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="va">specificity</span> <span class="op">=</span>  <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="va">p_pass_given_s</span><span class="op">)</span><span class="op">*</span><span class="va">ps</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="va">tn</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></code></pre></div>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references">
<div id="ref-BolsinovaMaris2016">
<p>Bolsinova, Maria, and Gunter Maris. 2016. “Can Irt Solve the Missing Data Problem in Test Equating?” <em>Frontiers in Psychology</em> 6: 1956. <a href="https://doi.org/10.3389/fpsyg.2015.01956">https://doi.org/10.3389/fpsyg.2015.01956</a>.</p>
</div>
<div id="ref-Swets96">
<p>Swets, John A. 1996. <em>Signal Detection Theory and Roc Analysis in Psychology and Diagnostics: Collected Papers.</em> Hillsdale, NJ: Lawrence Erlbaum Associates, Inc.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Gunter Maris, Timo Bechger, Jesse Koops, Ivailo Partchev.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
